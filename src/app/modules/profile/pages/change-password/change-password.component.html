<div class="change-password-page-container">
  <!-- Header Section -->
  <div class="header-section text-center mb-5">
    <h2 class="page-title">
      <i class="fas fa-key me-2"></i>
      Change Password
    </h2>
    <div class="header-divider"></div>
    <p class="page-subtitle">Update your account password securely</p>
  </div>

  <!-- Form Card -->
  <div class="card shadow-lg border-0 p-4 p-md-5 profile-card">
    <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
      <div class="mb-4">
        <label class="form-label"><i class="fas fa-lock me-2"></i>Current Password</label>
        <div class="input-group">
          <input [type]="showCurrentPassword ? 'text' : 'password'" class="form-control" formControlName="currentPassword" />
          <button type="button" class="btn btn-outline-secondary" (click)="showCurrentPassword = !showCurrentPassword">
            <i class="fas" [ngClass]="showCurrentPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </button>
        </div>
        <div class="text-danger" *ngIf="changePasswordForm.get('currentPassword')?.touched && changePasswordForm.get('currentPassword')?.invalid">
          Current password is required.
        </div>
      </div>

      <div class="mb-4">
        <label class="form-label"><i class="fas fa-key me-2"></i>New Password</label>
        <div class="input-group">
          <input [type]="showNewPassword ? 'text' : 'password'" class="form-control" formControlName="newPassword" />
          <button type="button" class="btn btn-outline-secondary" (click)="showNewPassword = !showNewPassword">
            <i class="fas" [ngClass]="showNewPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </button>
        </div>
        <div class="text-danger" *ngIf="changePasswordForm.get('newPassword')?.touched && changePasswordForm.get('newPassword')?.errors?.['minlength']">
          Password must be at least 8 characters.
        </div>
      </div>

      <div class="mb-4">
        <label class="form-label"><i class="fas fa-check-double me-2"></i>Confirm New Password</label>
        <div class="input-group">
          <input [type]="showConfirmPassword ? 'text' : 'password'" class="form-control" formControlName="confirmPassword" />
          <button type="button" class="btn btn-outline-secondary" (click)="showConfirmPassword = !showConfirmPassword">
            <i class="fas" [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
          </button>
        </div>
        <div class="text-danger" *ngIf="changePasswordForm.errors?.['mismatch']">
          Passwords do not match.
        </div>
      </div>

      <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
      </div>

      <div *ngIf="successMessage" class="alert alert-success">
        {{ successMessage }}
      </div>

      <div class="text-center">
        <button class="btn btn-save px-5 py-3" [disabled]="isSubmitting || changePasswordForm.invalid">
          <i class="fas fa-key me-2"></i>Change Password
          <span *ngIf="isSubmitting" class="ms-2"><i class="fas fa-spinner fa-spin"></i></span>
        </button>
      </div>
    </form>
  </div>
</div>
